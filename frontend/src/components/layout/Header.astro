---
import Menu from "./Menu.astro";

export interface Props {
    verLogo?: boolean;
    fondoNegro?: boolean;
}

const { verLogo = true, fondoNegro = false } = Astro.props;

const inlineHide = verLogo
    ? ""
    : "opacity:0;visibility:hidden;pointer-events:none;";
---

<header
    id="mainHeader"
    data-fixed={fondoNegro ? "true" : "false"}
    class={`fixed top-0 left-0 w-full z-50
         h-25 sm:h-25 md:h-25
         transition-[background-color,box-shadow] duration-700 ease-[cubic-bezier(0.25,0.1,0.25,1)]
         ${fondoNegro ? "bg-black shadow-[0_4px_20px_rgba(0,0,0,0.4)]" : "bg-transparent"}`}
>
    <nav
        class="h-full grid grid-cols-[1fr_auto_1fr] items-center
           gap-2 sm:gap-6 md:gap-10
           mx-auto
           px-4 sm:px-6 md:px-8"
    >
        <!-- Izquierda -->
        <ul
            class="flex items-center justify-end
             gap-x-3 sm:gap-x-6 md:gap-x-10
             flex-wrap sm:flex-nowrap whitespace-nowrap min-w-0"
        >
            <li>
                <a
                    href="/artistas"
                    class="font-avestrava text-[clamp(25px,8vw,70px)] tracking-wide
                 text-white hover:text-red-400 transition-colors"
                >
                    Artistas
                </a>
            </li>
            <li>
                <a
                    href="/hot"
                    class="text-white font-avestrava text-[clamp(25px,8vw,70px)] tracking-wide
                 hover:text-red-400 transition-colors"
                >
                    Hot
                </a>
            </li>
        </ul>

        <!-- Centro -->
        <div
            class="flex items-center justify-center
             gap-3 sm:gap-6
             min-w-[96px] sm:min-w-[140px] md:min-w-[160px] px-1"
        >
            <span
                class="hidden sm:block h-[1.5px] w-16 sm:w-20 md:w-24 bg-white/40 rounded-full"
            ></span>

            <a
                href="/"
                aria-label="Ir a inicio"
                class="flex items-center justify-center"
            >
                <img
                    id="headerLogo"
                    src="/img/Home/Gallo.webp"
                    alt="RedRoosters TV"
                    width="56"
                    height="56"
                    class="h-13 sm:h-13 md:h-13 transition-opacity duration-700"
                    style={inlineHide}
                />
            </a>

            <span
                class="hidden sm:block h-[1.5px] w-16 sm:w-20 md:w-24 bg-white/40 rounded-full"
            ></span>
        </div>

        <!-- Derecha -->
        <ul
            class="flex items-center justify-start
             gap-x-3 sm:gap-x-6 md:gap-x-10
             flex-wrap sm:flex-nowrap whitespace-nowrap min-w-0"
        >
            <li>
                <a
                    href="/nosotros"
                    class="text-white font-avestrava font-medium tracking-wide hover:text-red-400 transition-colors
                 text-[clamp(25px,8vw,70px)]"
                >
                    Nosotros
                </a>
            </li>
            <li class="flex items-center">
                <button
                    id="menuBtn"
                    type="button"
                    aria-expanded="false"
                    aria-controls="sideMenu"
                    class="relative group"
                >
                    <div
                        class="relative flex items-center justify-center
               w-12 h-12 select-none overflow-hidden"
                    >
                        <div
                            class="flex flex-col justify-between
                   w-[20px] h-[20px]
                   transform transition-all duration-300 origin-center"
                        >
                            <!-- LINEAS HAMBURGUESA -->
                            <div
                                class="bg-white group-hover:bg-red-500 h-[2px] w-7 transform transition-all duration-300
                                origin-left group-[.menu-open]:translate-x-10"
                            >
                            </div>

                            <div
                                class="bg-white group-hover:bg-red-500 h-[2px] w-7 rounded transform transition-all duration-300 delay-200
                                group-[.menu-open]:translate-x-10"
                            >
                            </div>

                            <div
                                class="bg-white group-hover:bg-red-500 h-[2px] w-7 transform transition-all duration-300 origin-left delay-300
                                group-[.menu-open]:translate-x-10"
                            >
                            </div>

                            <!-- X -->
                            <div
                                class="absolute items-center justify-between
                       transform transition-all duration-500
                       top-1/2 -translate-y-1/2 -translate-x-10
                       group-[.menu-open]:translate-x-0
                       flex w-0 group-[.menu-open]:w-12"
                            >
                                <div
                                    class="absolute bg-white group-hover:bg-red-500 h-[2px] w-5 transform transition-all duration-500
                                    rotate-45 delay-300 group-[.menu-open]:rotate-45"
                                >
                                </div>

                                <div
                                    class="absolute bg-white group-hover:bg-red-500 h-[2px] w-5 transform transition-all duration-500
                                    -rotate-45 delay-300 group-[.menu-open]:-rotate-45"
                                >
                                </div>
                            </div>
                        </div>
                    </div>
                </button>

                <Menu />
            </li>
        </ul>
    </nav>
</header>

<script type="module" src="/src/scripts/menu/menu.js"></script>
<script type="module" src="/src/scripts/menu/logout.js"></script>

<script>
    window.addEventListener("scroll", () => {
        const header = document.getElementById("mainHeader");

        if (!header) return;

        const fijo = header.dataset.fixed === "true";
        if (fijo) {
            return;
        }

        if (window.scrollY > 50) {
            header.classList.remove("bg-transparent");

            header.classList.add(
                "bg-black",
                "shadow-[0_4px_20px_rgba(0,0,0,0.4)]",
            );
        } else {
            header.classList.remove(
                "bg-black",
                "shadow-[0_4px_20px_rgba(0,0,0,0.4)]",
            );
        }
    });
</script>
